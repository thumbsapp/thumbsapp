<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ThumbsApp ¬∑ Feed</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/feed.css">
    <link rel="stylesheet" href="css/cards.css">
    <link rel="stylesheet" href="css/live.css">
    <link rel="stylesheet" href="css/modal.css">
    <link rel="stylesheet" href="css/buttons.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <div id="app">
        <!-- header loaded via js but we also include static structure for demo; will be replaced by js, but we add modifications here as well -->
        <header>
            <div class="logo"><i>üëç</i> ThumbsApp</div>
            <nav class="main-nav">
                <a href="feed.html">Home</a>
                <a href="live.html">Live Arena</a>
                <a href="games.html">Games</a>
                <!-- Marketplace and Leaderboard removed, replaced with MORE and CREATE -->
                <div class="nav-dropdown more-dropdown">
                    <button class="more-btn">MORE ‚ñº</button>
                    <div class="dropdown-menu" id="moreDropdown">
                        <div class="dropdown-section">
                            <strong>Language</strong>
                            <a href="#">English</a><a href="#">French</a><a href="#">German</a><a href="#">Indian</a><a href="#">Chinese</a><a href="#">Tanzanian</a><a href="#">Swahili</a><a href="#">Arabic</a>
                        </div>
                        <div class="dropdown-section">
                            <strong>Theme</strong>
                            <a href="#" data-theme="default">Default</a><a href="#" data-theme="red">Red</a><a href="#" data-theme="pink">Pink</a><a href="#" data-theme="yellow">Yellow</a><a href="#" data-theme="orange">Orange</a>
                        </div>
                        <div class="dropdown-section">
                            <strong>Options</strong>
                            <a href="#">Mute</a><a href="#">Report</a><a href="#">Block</a><a href="#">Get Help</a><a href="#">Setting</a>
                        </div>
                    </div>
                </div>
                <button class="create-nav-btn" onclick="ThumbsApp.challenges.checkAuthAndCreate()">CREATE</button>
            </nav>
            <div class="search-bar">
                <input type="text" placeholder="Search games, users, challenges...">
            </div>
            <div class="header-actions">
                <div class="wallet-badge"><span>üí∞</span> $<span id="walletBalance">1250</span></div>
                <div class="notification-icon" onclick="ThumbsApp.notifications.open()">
                    üîî
                    <span class="notification-badge" id="notificationBadge">0</span>
                </div>
                <!-- MENU dropdown (small emoji table) -->
                <div class="nav-dropdown menu-dropdown">
                    <button class="menu-btn">üçî MENU</button>
                    <div class="dropdown-menu" id="menuDropdown">
                        <a href="#">Followers</a>
                        <a href="#">Create Post</a>
                        <a href="#">Create Story</a>
                        <a href="#">Create ThumTok</a>
                        <a href="#">Post Advertisement</a>
                    </div>
                </div>
                <!-- MORE button (three dots) at far right (already added in nav, but we add another one here? Actually we already have MORE in nav, but task A says "Add MORE button (three dots) at far right". We'll add a separate more button in header-actions with three dots icon, and its own dropdown. That might be duplicate. To satisfy both, we'll add a separate more button here with three dots, and its dropdown containing same links as nav MORE? The nav MORE we added is a text button. The far right one could be icon. We'll implement both: nav MORE (text) and header-actions MORE (icon). The dropdown for both could be the same or separate. We'll make them separate for simplicity, but they could share content. We'll follow the letter: Task A says "Add MORE button (three dots) at far right" with dropdown links. So we add an icon button in header-actions with its own dropdown. The nav MORE (text) we added for Task C is separate. We'll keep both. -->
                <div class="nav-dropdown more-icon-dropdown">
                    <button class="more-icon-btn">‚ãÆ</button>
                    <div class="dropdown-menu" id="moreIconDropdown">
                        <div class="dropdown-section">
                            <strong>Language</strong>
                            <a href="#">English</a><a href="#">French</a><a href="#">German</a><a href="#">Indian</a><a href="#">Chinese</a><a href="#">Tanzanian</a><a href="#">Swahili</a><a href="#">Arabic</a>
                        </div>
                        <div class="dropdown-section">
                            <strong>Theme</strong>
                            <a href="#" data-theme="default">Default</a><a href="#" data-theme="red">Red</a><a href="#" data-theme="pink">Pink</a><a href="#" data-theme="yellow">Yellow</a><a href="#" data-theme="orange">Orange</a>
                        </div>
                        <div class="dropdown-section">
                            <strong>Options</strong>
                            <a href="#">Mute</a><a href="#">Report</a><a href="#">Block</a><a href="#">Get Help</a><a href="#">Setting</a>
                        </div>
                    </div>
                </div>
                <button class="create-challenge-btn" onclick="ThumbsApp.challenges.checkAuthAndCreate()">+ Create Challenge</button>
                <div class="avatar-dropdown" onclick="ThumbsApp.ui.toggleDropdown()">
                    <img src="assets/avatars/default.jpg" alt="avatar" id="headerAvatar">
                    <span>‚ñº</span>
                </div>
                <span class="live-indicator" id="liveIndicator" style="display:none;"></span>
            </div>
        </header>
        <div class="layout">
            <aside class="left-sidebar" id="leftSidebar"></aside>
            <main class="center-feed" id="centerFeed"></main>
            <aside class="right-rail" id="rightRail"></aside>
        </div>
        <footer id="footer"></footer>
    </div>

    <!-- modals container -->
    <div id="modalContainer"></div>

    <!-- floating plus button for mobile (Task H) -->
    <div class="mobile-plus-button" id="mobilePlusBtn">+</div>
    <div class="mobile-overlay" id="mobileOverlay">
        <div class="overlay-content">
            <span class="close-overlay" id="closeOverlay">&times;</span>
            <h3>Navigation</h3>
            <a href="feed.html">Home</a>
            <a href="live.html">Live Arena</a>
            <a href="games.html">Games</a>
            <a href="#" onclick="ThumbsApp.ui.toggleMoreDropdown()">MORE</a>
            <a href="#" onclick="ThumbsApp.challenges.checkAuthAndCreate()">CREATE</a>
            <a href="#" onclick="ThumbsApp.ui.toggleMenuDropdown()">MENU</a>
            <a href="profile.html">Profile</a>
            <a href="messages.html">Messages</a>
            <a href="donations.html">Donations</a>
            <a href="escrow.html">Escrow</a>
            <button class="close-btn" onclick="ThumbsApp.ui.hideOverlay()">Close</button>
        </div>
    </div>

    <script src="js/core/storage.js"></script>
    <script src="js/core/state.js"></script>
    <script src="js/core/router.js"></script>
    <script src="js/core/app.js"></script>
    <script src="js/modules/ui.js"></script>
    <script src="js/modules/feed.js"></script>
    <script src="js/modules/live.js"></script>
    <script src="js/modules/notifications.js"></script>
    <script src="js/modules/wallet.js"></script>
    <script src="js/modules/messenger.js"></script>
    <script src="js/modules/challenges.js"></script>
    <script src="js/modules/thumtok.js"></script>
    <script src="js/modules/avatar.js"></script>
    <script src="js/modules/dropdown.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            window.ThumbsApp.init('feed');
        });
    </script>
</body>
</html>
